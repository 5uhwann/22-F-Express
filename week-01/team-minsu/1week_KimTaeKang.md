# **Node.js**

## Node.js란?

- Node.js는 Chrome V8 JavaScript 엔진으로 빌드된 JavaScript 런타임입니다.

- Node.js는 C++로 쓰인 V8 코드베이스를 사용하며 로컬 파일 시스템 활용, 파일 열기, 파일 읽기, 파일 삭제 등의 기능을 추가해 줍니다.

## REPL

- **REPL**은 Read-Eval-Print-Loop의 약자로, Read는 사용자의 입력을 받아들이는 것, Eval은 입력받은 코드를 평가하는 것, Print는 평가된 결과를 출력하는 것, Loop는 평가된 결과를 출력한 후 다시 사용자의 입력을 받아들이는 것을 반복하는 것을 의미합니다.

<hr>

# **기본 개념 이해**

## 웹 동작 원리

- 브라우저는 주어진 IP 주소를 사용해 서버에 요청을 보낸다.

- 해당 IP 주소가 있는 컴퓨터의 인터넷에서 구동되는 서버 프로그램이 요청을 받아들이고 처리한다.

- 서버에서 처리된 결과를 브라우저에 응답한다.

<hr>

# **Node Server 생성**

## 코어 모듈

### Node.js는 기본적으로 제공하는 코어 모듈이 있습니다.

#### 예시

- http : 웹 서버를 생성하고 http 요청 및 응답을 처리하는 모듈입니다.
- https : 모든 전송을 데이터가 암호화된 SSL 암호화 서버를 생성하고 https 요청 및 응답을 처리하는 모듈입니다.
- fs : 파일 시스템을 다루기 위한 모듈
- path : OS마다 다른 파일 경로 형식을 사용하기 때문에 파일 경로를 다루기 위한 모듈
- os : 운영체제의 정보를 다루기 위한 모듈

## require

### Node.js는 전역으로 노출하는 특성이 있어서 Node.js로 실행하는 모든 파일에서 기본으로 require이라는 키워드를 사용할 수 있습니다.

- require 키워드는 다른 파일로의 경로나 Javscript 파일을 불러올 수 있습니다.

- 경로를 생략하면 글로벌 모듈을 찾습니다.

## http 모듈

### CreateServer 메서드

- http 모듈의 createServer 메서드는 서버를 생성합니다.

- createServer 메서드는 requestListener라는 콜백 함수를 인자로 받습니다.

### requestListener

- 들어오는 모든 요청에 대해 실행되는 콜백 함수입니다.

- 들어오는 메시지에 대한 정보를 담고 있는 request 객체와 응답에 대한 정보를 담고 있는 response 객체를 인자로 받습니다.

### listen 메서드

- listen 메서드는 Node.js가 스크립트를 바로 종료하지 않고 계속 실행되면서 요청을 받을 수 있도록 합니다.

- listen 메서드는 포트 번호를 인자로 받습니다.

### 예시

```javascript
const http = require("http");

http.createServer((res, req) => {
  console.log(req);
  // 요청을 콘솔에 출력
});
server.listen(3000);
// 3000번 포트에서 요청을 받음
```

createServer에 익명함수를 입력하면 서버에 요청이 들어올 때 마다 익명함수가 실행됩니다.

**이게 바로 Node.js의 주된 이벤트 드리븐 아키텍처(Event Driven Architecture)입니다.**

<hr>

# **Node의 라이프사이클 및 이벤트 루프**

## Node의 라이프사이클

- node app.js 파일 실행
- 스크립트 실행
- 코드를 분석한 후 변수와 함수를 등록
- .. 이벤트 루프

### **이벤트 루프로 인해 프로그램이 종료되지 않는다.**

<hr>

## 이벤트 루프(Event Loop)

### Node.js가 관리하는 이벤트 루프는 작업이 남아있는 한 계속해서 작동하는 루프 프로세스이다.

#### 예시

- Node Server생성 주제에서 createServer에 들어오는 요청 리스너를 예시로
- 계속되는 이벤트 리스너라는 함수를 넣어서 만든 이벤트 리스너를 제거하지 않았고 서버가 계속 운영되기 위해 제거하지 않아야 한다.

### **코어 노드 애플리케이션은 이벤트 루프에 의해 관리된다.**

## Node.js가 이러한 이벤트 드리븐 접근 방법을 사용하는 이유

- 단일 스레드 JavaScript를 실행하기 때문에 블로킹이 발생하면 다른 작업을 할 수 없다.

### 이벤트 루프를 제거하려면 process.exit()를 사용해야 한다.
